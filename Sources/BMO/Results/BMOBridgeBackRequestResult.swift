/*
 * BMOBridgeBackRequestResult.swift
 * BMO
 *
 * Created by François Lamboley on 1/24/18.
 * Copyright © 2018 happn. All rights reserved.
 */

import Foundation



public struct BMOBridgeBackRequestResult<BridgeType : BMOBridge> {
	
	/** The metadata for the imported root objects.
	
	These are relationship metadata, or if result is root, root metadata. There
	are no object or attribute metadata: if you need those, keep them in your
	model, potentially in transient properties. */
	public let metadata: BridgeType.MetadataType?
	
	/** The ids of the (root) objects that were retrieved from the async
	operation, in the order they were retrieved.
	
	Some importers might decide to drop the relationships part of the result for
	performance reasons (hence the optionality of the relationships part of the
	tuple). */
	public let returnedObjectIDsAndRelationships: [(objectID: BridgeType.DbType.ObjectIDType, relationships: [String: BMOBridgeBackRequestResult<BridgeType>]?)]
	
	/** Contains the changes reported by the db fast import method. Most of the
	time will only contain modifications generated by the method, not the
	implicit modifications (eg. when a relationship value is replaced, all
	objects previously in the relationship are usually modified because the
	reverse relationship will be set to nil).
	
	Some importers might decide to drop this result for performance reasons,
	hence the optionality. */
	public let asyncChanges: BMOChangesDescription<BridgeType.DbType.ObjectIDType>?
	
}
